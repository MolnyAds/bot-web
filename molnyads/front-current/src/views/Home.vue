<template>
  <div class="container">
    <div class="header">
      <div class="logo">
        <div class="logo-icon">üì¢</div>
        <div class="logo-text">Molny ADS</div>
      </div>
      <div class="profile-icon">
      <img
        v-if="appStore.tgInitData?.tgWebAppData?.user?.photo_url"
        :src="appStore.tgInitData.tgWebAppData.user.photo_url"
        :alt="appStore.tgInitData.tgWebAppData.user.first_name || 'user'"
      />
      <span v-else>üë§</span>
      </div>
    </div>

    <router-link to="/balance">
      <div class="balance-section">
        <div class="balance-info">
          <h3>–ú–æ–π –±–∞–ª–∞–Ω—Å:</h3>
          <div class="balance-amount">{{ appStore.balance }}‚ÇΩ</div>
        </div>
        <router-link to="/topup">
          <div>
            <button class="top-up-btn">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
          </div>
        </router-link>
    </div>
    </router-link>

    <div class="menu-items">
      <router-link to="/mychannels" class="menu-item">
        <div class="menu-icon channels">üì±</div>
        <div class="menu-text">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</div>
        <div class="menu-arrow">‚Ä∫</div>
      </router-link>

      <router-link to="/catalog" class="menu-item">
        <div class="menu-icon ads">‚úàÔ∏è</div>
        <div class="menu-text">–ö—É–ø–∏—Ç—å —Ä–µ–∫–ª–∞–º—É</div>
        <div class="menu-arrow">‚Ä∫</div>
      </router-link>

      <router-link to="/adcatalog" class="menu-item">
        <div class="menu-icon purchases">üõí</div>
        <div class="menu-text">–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏</div>
        <div class="menu-arrow">‚Ä∫</div>
      </router-link>

      <router-link to="/profile" class="menu-item">
        <div class="menu-icon profile">üë§</div>
        <div class="menu-text">–ü—Ä–æ—Ñ–∏–ª—å</div>
        <div class="menu-arrow">‚Ä∫</div>
      </router-link>
    </div>

    <div class="notifications">
      <div class="notifications-text">
          <span class="notifications-count"></span>
      </div>
    </div>
  </div>
</template>

<script setup>

import { useAppStore } from '@/stores/app'

const appStore = useAppStore()

// –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Ç—è–Ω—É—Ç—å –±–∞–ª–∞–Ω—Å:
import { onMounted } from 'vue'


onMounted(() => {
  fetch(`${appStore.apiBaseUrl}/api/user`, {
    headers: {
      Authorization: 'Telegram-Init-Data ' + appStore.tgInitDataRow
    },
    mode: 'cors',               // —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º CORS‚Äë—Ä–µ–∂–∏–º
  })
  .then(res => res.ok ? res.json() : Promise.reject())
  .then(data => {
    // –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å data
  })
  .catch(() => {
    // –æ—à–∏–±–∫–∞
  })
})
</script>